<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/icon" href="/favicon.ico"><meta name="generator" content="Astro v4.11.5"><!-- Canonical URL --><link rel="canonical" href="https://rezvan.xyz/chalmers/dat038/dat038_6/"><!-- Primary Meta Tags --><title>Part 6 - Trees | data structures algorithms | rezvan.xyz</title><meta name="title" content="Part 6 - Trees | data structures algorithms | rezvan.xyz"><meta name="description"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://rezvan.xyz/chalmers/dat038/dat038_6/"><meta property="og:title" content="Part 6 - Trees | data structures algorithms | rezvan.xyz"><meta property="og:description"><meta property="og:image" content="https://rezvan.xyz/favicon.ico"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://rezvan.xyz/chalmers/dat038/dat038_6/"><meta property="twitter:title" content="Part 6 - Trees | data structures algorithms | rezvan.xyz"><meta property="twitter:description"><meta property="twitter:image" content="https://rezvan.xyz/favicon.ico"><!-- PageFind --><link href="/pagefind/pagefind-ui.css" rel="stylesheet"><script src="/pagefind/pagefind-ui.js"></script><!-- KaTeX support --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script><!-- inline KaTeX --><script>
    function renderKaTeX() {
        if (typeof renderMathInElement !== "undefined") {
            renderMathInElement(document.body, {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "$", right: "$", display: false },
                ],
            });
        }
    }

    document.addEventListener("DOMContentLoaded", renderKaTeX);
    document.addEventListener("astro:after-swap", renderKaTeX);
</script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script>
    function init() {
        preloadTheme();
        onScroll();
        animate();
        updateThemeButtons();
        addCopyCodeButtons();
        setGiscusTheme();

        const backToTop = document.getElementById("back-to-top");
        backToTop?.addEventListener("click", (event) => scrollToTop(event));

        const backToPrev = document.getElementById("back-to-prev");
        backToPrev?.addEventListener("click", () => window.history.back());

        const lightThemeButton = document.getElementById("light-theme-button");
        lightThemeButton?.addEventListener("click", () => {
            localStorage.setItem("theme", "light");
            toggleTheme(false);
            updateThemeButtons();
        });

        const darkThemeButton = document.getElementById("dark-theme-button");
        darkThemeButton?.addEventListener("click", () => {
            localStorage.setItem("theme", "dark");
            toggleTheme(true);
            updateThemeButtons();
        });

        const systemThemeButton = document.getElementById(
            "system-theme-button",
        );
        systemThemeButton?.addEventListener("click", () => {
            localStorage.setItem("theme", "system");
            toggleTheme(
                window.matchMedia("(prefers-color-scheme: dark)").matches,
            );
            updateThemeButtons();
        });

        window
            .matchMedia("(prefers-color-scheme: dark)")
            .addEventListener("change", (event) => {
                if (localStorage.theme === "system") {
                    toggleTheme(event.matches);
                }
            });

        document.addEventListener("scroll", onScroll);
    }

    function updateThemeButtons() {
        const theme = localStorage.getItem("theme");
        const lightThemeButton = document.getElementById("light-theme-button");
        const darkThemeButton = document.getElementById("dark-theme-button");
        const systemThemeButton = document.getElementById(
            "system-theme-button",
        );

        function removeActiveButtonTheme(button) {
            button?.classList.remove("bg-black/5");
            button?.classList.remove("dark:bg-white/5");
        }

        function addActiveButtonTheme(button) {
            button?.classList.add("bg-black/5");
            button?.classList.add("dark:bg-white/5");
        }

        removeActiveButtonTheme(lightThemeButton);
        removeActiveButtonTheme(darkThemeButton);
        removeActiveButtonTheme(systemThemeButton);

        if (theme === "light") {
            addActiveButtonTheme(lightThemeButton);
        } else if (theme === "dark") {
            addActiveButtonTheme(darkThemeButton);
        } else {
            addActiveButtonTheme(systemThemeButton);
        }
    }

    function animate() {
        const animateElements = document.querySelectorAll(".animate");

        animateElements.forEach((element, index) => {
            setTimeout(() => {
                element.classList.add("show");
            }, index * 100);
        });
    }

    function onScroll() {
        if (window.scrollY > 0) {
            document.documentElement.classList.add("scrolled");
        } else {
            document.documentElement.classList.remove("scrolled");
        }
    }

    function scrollToTop(event) {
        event.preventDefault();
        window.scrollTo({
            top: 0,
            behavior: "smooth",
        });
    }

    function toggleTheme(dark) {
        const css = document.createElement("style");

        css.appendChild(
            document.createTextNode(
                `* {
             -webkit-transition: none !important;
             -moz-transition: none !important;
             -o-transition: none !important;
             -ms-transition: none !important;
             transition: none !important;
          }
        `,
            ),
        );

        document.head.appendChild(css);

        if (dark) {
            document.documentElement.classList.add("dark");
        } else {
            document.documentElement.classList.remove("dark");
        }

        window.getComputedStyle(css).opacity;
        document.head.removeChild(css);

        setGiscusTheme();
    }

    function preloadTheme() {
        const userTheme = localStorage.theme;

        if (userTheme === "light" || userTheme === "dark") {
            toggleTheme(userTheme === "dark");
        } else {
            toggleTheme(
                window.matchMedia("(prefers-color-scheme: dark)").matches,
            );
        }
    }

    function addCopyCodeButtons() {
        let copyButtonLabel = "üìã";
        let codeBlocks = Array.from(document.querySelectorAll("pre"));

        async function copyCode(codeBlock, copyButton) {
            const codeText = codeBlock.innerText;
            const buttonText = copyButton.innerText;
            const textToCopy = codeText.replace(buttonText, "");

            await navigator.clipboard.writeText(textToCopy);
            copyButton.innerText = "‚úÖ";

            setTimeout(() => {
                copyButton.innerText = copyButtonLabel;
            }, 2000);
        }

        for (let codeBlock of codeBlocks) {
            const wrapper = document.createElement("div");
            wrapper.style.position = "relative";

            const copyButton = document.createElement("button");
            copyButton.innerText = copyButtonLabel;
            copyButton.classList = "copy-code";

            codeBlock.setAttribute("tabindex", "0");
            codeBlock.appendChild(copyButton);

            codeBlock.parentNode.insertBefore(wrapper, codeBlock);
            wrapper.appendChild(codeBlock);

            copyButton?.addEventListener("click", async () => {
                await copyCode(codeBlock, copyButton);
            });
        }
    }

    const setGiscusTheme = () => {
        const giscus = document.querySelector(".giscus-frame");

        const isDark = document.documentElement.classList.contains("dark");

        if (giscus) {
            const url = new URL(giscus.src);
            url.searchParams.set("theme", isDark ? "dark" : "light");
            giscus.src = url.toString();
        }
    };

    document.addEventListener("DOMContentLoaded", () => init());
    document.addEventListener("astro:after-swap", () => init());
    preloadTheme();
</script><link rel="stylesheet" href="/_astro/_subject_.BkIVzPml.css">
<style>summary[data-astro-cid-xvrfupwn]{cursor:pointer;border-top-left-radius:.5rem;border-top-right-radius:.5rem;padding:.375rem .75rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}summary[data-astro-cid-xvrfupwn]:hover{background-color:#0000000d}summary[data-astro-cid-xvrfupwn]:hover:is(.dark *){background-color:#ffffff0d}details[data-astro-cid-xvrfupwn][open] summary[data-astro-cid-xvrfupwn]{background-color:#0000000d}details[data-astro-cid-xvrfupwn][open] summary[data-astro-cid-xvrfupwn]:is(.dark *){background-color:#ffffff0d}
</style><script type="module" src="/_astro/hoisted.DzxSAGjc.js"></script></head> <body> <header data-astro-transition-persist="astro-l7r54iwe-1"> <div class="mx-auto max-w-screen-sm px-3"> <div class="flex flex-wrap justify-between gap-y-2"> <a href="/" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out">  <div class="font-semibold"> rezvan.xyz </div>  </a> <nav class="flex items-center gap-1 text-sm"> <a href="/posts" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> posts </a> <span> / </span> <a href="/chalmers" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> chalmers </a> <span> / </span> <a href="/cityu" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> cityu </a> <span> / </span> <a href="/pdf/cv/cv.pdf" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> cv </a> <span> / </span> <button id="magnifying-glass" aria-label="Search" class="flex items-center rounded border border-black/15 bg-neutral-100 px-2 py-1 text-xs transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:bg-neutral-900 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg height="16" stroke-linejoin="round" viewBox="0 0 16 16" width="16" style="color: currentcolor;"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 7C3.5 5.067 5.067 3.5 7 3.5C8.933 3.5 10.5 5.067 10.5 7C10.5 7.88461 10.1718 8.69256 9.63058 9.30876L9.30876 9.63058C8.69256 10.1718 7.88461 10.5 7 10.5C5.067 10.5 3.5 8.933 3.5 7ZM9.96544 11.0261C9.13578 11.6382 8.11014 12 7 12C4.23858 12 2 9.76142 2 7C2 4.23858 4.23858 2 7 2C9.76142 2 12 4.23858 12 7C12 8.11014 11.6382 9.13578 11.0261 9.96544L14.0303 12.9697L14.5607 13.5L13.5 14.5607L12.9697 14.0303L9.96544 11.0261Z" fill="currentColor"></path></svg>
&nbsp;Search
</button> </nav> </div> </div> </header> <main>  <div class="mx-auto max-w-screen-sm px-3"> <div class="animate"> <a href="/chalmers/dat038" class="not-prose group relative flex w-fit flex-nowrap rounded border border-black/15 py-1.5 pl-7 pr-3 transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute left-2 top-1/2 size-4 -translate-y-1/2 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-2 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 5 12 12 19" class="translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="text-sm"> Back to data structures algorithms </div> </a> </div> <div class="my-10 space-y-1"> <div class="animate flex items-center gap-1.5"> <div class="font-base text-sm"> DAT038 </div>
&bull;
<div class="font-base text-sm"> <time datetime="2022-11-30T17:08:48.000Z"> December 01, 2022 </time> </div> 
&bull;
<div class="font-base text-sm">
Last modified:  <time datetime="2024-09-02T11:21:25.000Z"> September 02, 2024 </time> </div> 
&bull;
<div class="font-base text-sm"> 13 min read </div> </div> <h1 class="animate text-3xl font-semibold text-black dark:text-white"> Part 6 - Trees </h1> </div> <details open class="animate rounded-lg border border-black/15 dark:border-white/20" data-astro-cid-xvrfupwn> <summary data-astro-cid-xvrfupwn>Table of Contents</summary> <nav class="" data-astro-cid-xvrfupwn> <ul class="py-3" data-astro-cid-xvrfupwn> <li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#trees" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Trees </a> <ul class="translate-x-3"> <li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#tree-rules" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Tree rules </a>  </li> </ul> </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#recursive-tree" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Recursive Tree </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#programming-with-trees" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Programming with trees </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#binary-trees" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Binary Trees </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#binary-search-trees" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Binary Search Trees </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#fin-maxmin-value-in-bst" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Fin max/min value in BST </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#sorting-a-bst" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Sorting a BST </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#deletion" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Deletion </a> <ul class="translate-x-3"> <li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#deleting-a-leaf" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Deleting a leaf </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#deleting-a-node-with-one-child" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Deleting a node with one child </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#deleting-a-node-with-two-children" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Deleting a node with two children </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#the-hardest-case" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> The hardest case </a>  </li> </ul> </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#complexity" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Complexity </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#bst-summary" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> BST Summary </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#invariants" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Invariants </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#avl-trees" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> AVL Trees </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#tree-rotations" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Tree Rotations </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#avl-insertion" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> AVL Insertion </a> <ul class="translate-x-3"> <li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#case-1-left-left-tree" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Case 1: Left-left Tree </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#case-2-right-right-tree" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Case 2: Right-right Tree </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#case-3-left-right-tree" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Case 3: Left-right Tree </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#case-4-right-left-tree" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Case 4: Right-left Tree </a>  </li> </ul> </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#avl-insertion-summary" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> AVL Insertion Summary </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#avl-deletion" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> AVL Deletion </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#2-3-trees" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> 2-3 Trees </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#searching-in-2-3-trees" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Searching in 2-3 Trees </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#how-2-3-trees-balance" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> How 2-3 Trees balance </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#insertion-in-2-3-trees" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Insertion in 2-3 trees </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#summary-2-3-trees" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Summary 2-3 trees </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#red-black-bsts" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Red-black BSTs </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#red-black-tree-invariant" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Red-black Tree Invariant </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#red-black-bst-insertion" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Red-black BST Insertion </a> <ul class="translate-x-3"> <li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#case-1-skew" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Case 1: Skew </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#case-2-split" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Case 2: Split </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#case-3-red-root-node" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Case 3: Red Root Node </a>  </li> </ul> </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#red-black-tree-implementation" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Red-black Tree Implementation </a>  </li><li class="list-inside list-disc px-6 py-1.5 text-sm"> <a href="#red-black-tree-summary" target="_self" class="inline-block decoration-black/30 dark:decoration-white/30 hover:decoration-black/50 focus-visible:decoration-black/50 dark:hover:decoration-white/50 dark:focus-visible:decoration-white/50 text-current hover:text-black focus-visible:text-black dark:hover:text-white dark:focus-visible:text-white transition-colors duration-300 ease-in-out underline underline-offset-[3px]"> Red-black Tree Summary </a>  </li> </ul> </nav> </details> <article class="animate"> <p>In this part we‚Äôll cover so called ‚Äòtrees‚Äô in computer science.</p>
<h3 id="trees">Trees</h3>
<p>The formal definition of a ‚Äòtree‚Äô is: ‚ÄúA <em>hierarchical</em> data structure built up from <em>nodes</em>‚Äù.</p>
<p>So unlike a real tree which has its root at the bottom - the computer scientist flipped it - the <em>root</em> node is at the top of the tree.</p>
<p>In any tree there‚Äôs always <strong>one</strong> <em>root</em> node. Each node can have so-called <em>child</em> nodes, and these <em>children</em> can have their own child nodes and so on.</p>
<p>Therefore, all nodes - expect the root node - <strong>must</strong> have exactly <strong>one</strong> parent node.</p>
<h4 id="tree-rules">Tree rules</h4>
<p>I‚Äôve already stated some of the ‚Äòrules‚Äô of a tree, but generally we have 3 rules that makes a collection of nodes a tree.</p>
<ul>
<li>Each node must have exactly one <strong>unique</strong> parent node - expect the root node.</li>
<li>There must exactly be <strong>one</strong> root node.</li>
<li>If the first and second rules are followed - then no ‚Äòcycles‚Äô will appear.</li>
</ul>
<h3 id="recursive-tree">Recursive Tree</h3>
<p>Trees can also be defined recursively: ‚ÄúA tree consists of a root node together with its <strong>subtrees</strong>, which do not share any common nodes‚Äù.</p>
<p>This means, child node (of the root node) $\rightarrow$ root of subtree. This also means that a tree can be empty (no nodes) - for some applications this is needed.</p>
<h3 id="programming-with-trees">Programming with trees</h3>
<p>Now that we have some basic knowledge about trees - let‚Äôs try to represent them with code. A very natural representation would be a directory <strong>tree</strong>.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>class Tree:</span></span>
<span class="line"><span>    name: string</span></span>
<span class="line"><span>    size: int</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    children: list[Tree]</span></span>
<span class="line"><span></span></span></code></pre>
<p>If we now want to compute the total size of a directory (folder) we would need to:</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>def total(tree: Tree) -> int:</span></span>
<span class="line"><span>    n: int = tree.bytes</span></span>
<span class="line"><span>    for c in tree.children:</span></span>
<span class="line"><span>        n += total(c)</span></span>
<span class="line"><span>    return n</span></span>
<span class="line"><span></span></span></code></pre>
<p>And we can see that recursion and trees go hand in hand. Now let‚Äôs see how we can traverse the tree.</p>
<p>There are main methods for traversing - <strong>Pre-order</strong> traversal - meaning you process each node <strong>before</strong> visiting its children.
As well as <strong>Post-order</strong> traversal - meaning you process each node <strong>after</strong> visiting its children.</p>
<h3 id="binary-trees">Binary Trees</h3>
<p>Often we can use a special kind of tree called ‚ÄòBinary tree‚Äô - a binary tree is a tree where each node has exactly <strong>two</strong> children.</p>
<p>As we said before, these children can be represented as a null-value if they‚Äôre ‚Äòmissing‚Äô. We call these children nodes the ‚Äòleft‚Äô and ‚Äòright‚Äô nodes or subtrees.</p>
<p>Some terminology common used for trees are, <code>size</code> <code>height</code>, and <code>level</code>.
Size is the number of nodes in the (sub)tree - height, is the number of <code>levels</code> in the tree. Level is the distance from node to the root.</p>
<h3 id="binary-search-trees">Binary Search Trees</h3>
<p>Binary search trees or BSTs is a kind of binary tree but with some extra conditions:</p>
<ul>
<li>Each node has a <em>key</em></li>
<li>The node‚Äôs key is smaller than all the keys in its right subtree</li>
<li>The node‚Äôs key is greater than all the keys in its left subtree</li>
</ul>
<p>Or differently phrased, everything in its left subtree is less than the root, everything to the right is greater than the root.</p>
<p>With these rules searching becomes really, really effective and natural. We just compare our key to each node‚Äôs key and see if we traverse to the right or left.</p>
<p>If we ever hit a ‚Äònull‚Äô node, we can also say that the key we‚Äôre searching for doesn‚Äôt exist in this key.</p>
<p>So let us implement a map using BSTs!</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>class BSTMap[Key, Value]:</span></span>
<span class="line"><span>    class Node:</span></span>
<span class="line"><span>        key: Key</span></span>
<span class="line"><span>        value: Value</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        left, right: Node</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    root: Node</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def get(key: Key) -> Value:</span></span>
<span class="line"><span>    return get(key, root)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def put(key : Key, val : Value):</span></span>
<span class="line"><span>    root = put(key, val, root)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def get(key, node) -> Value:</span></span>
<span class="line"><span>    if node is None</span></span>
<span class="line"><span>        return None</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    if key &#x3C; node.key</span></span>
<span class="line"><span>        return get(key, node.left)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    if key > node.key</span></span>
<span class="line"><span>        return get(key, node.right)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    else:</span></span>
<span class="line"><span>        return node.value</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def put(key, val, node):</span></span>
<span class="line"><span>    if node is None</span></span>
<span class="line"><span>        return Node(key = key, value = val, left = None, right = None)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    elif key &#x3C; node.key:</span></span>
<span class="line"><span>        node.left = put(key, value, node.left)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    elif key > node.key:</span></span>
<span class="line"><span>        node.right = put(key, value, node.right)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    else:</span></span>
<span class="line"><span>        node.value = value</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return node</span></span>
<span class="line"><span></span></span></code></pre>
<h3 id="fin-maxmin-value-in-bst">Fin max/min value in BST</h3>
<p>To find the max/min value in BST we just repeatedly go right/left until we hit a null node. Real simple!</p>
<p>Or in code:</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span></span></span>
<span class="line"><span>def get_max(tree: BST):</span></span>
<span class="line"><span>    c_node = tree.root</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    while c_node != None:</span></span>
<span class="line"><span>        c_node = c_node.right</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return c_node.value</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def get_min(tree: BST):</span></span>
<span class="line"><span>    c_node = tree.root</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    while c_node != None:</span></span>
<span class="line"><span>        c_node = c_node.left</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return c_node.value</span></span>
<span class="line"><span></span></span></code></pre>
<h3 id="sorting-a-bst">Sorting a BST</h3>
<p>Sometimes we might want to print/store a BST in ascending order - the way to do this of course is via recursion!</p>
<p>This is also known as <em>in order</em> traversal - we print the left subtree, print the root then print the right subtree - we do this recursively.</p>
<p>So for example:</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>def print_sorted(node: Node):</span></span>
<span class="line"><span>    if node is None:</span></span>
<span class="line"><span>        return</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    print_sorted(node.left)</span></span>
<span class="line"><span>    print(node.key)</span></span>
<span class="line"><span>    print_sorted(node.right)</span></span>
<span class="line"><span></span></span></code></pre>
<p>We can also do a more general case - we make an <em>iterator</em> for the keys in the tree - by doing an in order traversal and store the keys in a dynamic array.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>def keys() -> list[Key]</span></span>
<span class="line"><span>    list = []</span></span>
<span class="line"><span>    inorder(root, list)</span></span>
<span class="line"><span>    return list</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def inorder(node: Node, list: list[Key]):</span></span>
<span class="line"><span>    if node is None:</span></span>
<span class="line"><span>        return</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    inorder(node.left, list)</span></span>
<span class="line"><span>    list.add(node.key)</span></span>
<span class="line"><span>    inorder(node.right, list)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>for key in BST.keys():</span></span>
<span class="line"><span>    print(key)</span></span>
<span class="line"><span></span></span></code></pre>
<h3 id="deletion">Deletion</h3>
<p>Deletion can be quite tricky in trees, and especially in BSTs - we can‚Äôt just remove a node however, there are some rules.</p>
<h4 id="deleting-a-leaf">Deleting a leaf</h4>
<p>A so-called leaf is a node with no children (or visually the leafs are the bottom nodes). These are fine to remove without any corrections.</p>
<p>Since we just remove that child, with no children there won‚Äôt be any problems.</p>
<h4 id="deleting-a-node-with-one-child">Deleting a node with one child</h4>
<p>Now, in the case we want to delete a node with exactly one child, it‚Äôs still quite trivial. Since that node only has one child, we can just replace the deleted node with its child. It doesn‚Äôt affect the tree as a whole.</p>
<h4 id="deleting-a-node-with-two-children">Deleting a node with two children</h4>
<p>This is where it becomes tricky, but if we take a step back one think about it, we need to find a node that upholds the requirements of,
everything to the left should be smaller and everything to the right must be greater. If we think what candidates fulfill this requirement - it becomes clear two nodes are good candidates.</p>
<p>The <em>greatest</em> (rightmost) key in the node‚Äôs <em>left</em> subtree <em><strong>or</strong></em> the <em>smallest</em> (leftmost) in the nodes‚Äô <em>right</em> subtree.</p>
<h4 id="the-hardest-case">The hardest case</h4>
<p>The case above becomes quite simple if the candidates don‚Äôt have any children, the hardest case in deletion is when these have one child.
What we need to do in that case is: We first delete the parent node by replacing it with its child - after we have done this we can delete the node we wanted to delete with our old (deleted) parent node.</p>
<p>So, not that hard logically - but can be a pain to implement correctly.</p>
<p>So let‚Äôs now do exactly that :)!</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>def delete(node: Node, key : Key):</span></span>
<span class="line"><span>	if node is None:</span></span>
<span class="line"><span>		return node</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	if key &#x3C; node.key:</span></span>
<span class="line"><span>		node.left = delete(node.left, key)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	elif(key > node.key):</span></span>
<span class="line"><span>		node.right = delete(node.right, key)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	else:</span></span>
<span class="line"><span>		if node.left is None:</span></span>
<span class="line"><span>			temp = node.right</span></span>
<span class="line"><span>			node = None</span></span>
<span class="line"><span>			return temp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		elif node.right is None:</span></span>
<span class="line"><span>			temp = node.left</span></span>
<span class="line"><span>			node = None</span></span>
<span class="line"><span>			return temp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		temp = get_max(node.left)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		node.key = temp.key</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		node.right = delete(node.right, temp.key)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	return node</span></span>
<span class="line"><span></span></span></code></pre>
<h3 id="complexity">Complexity</h3>
<p>The complexity of operations for BST are in the best case and average case, $\mathcal{O}(log\ n)$ which is great.
In the worst case however, these operations will take $\mathcal{O}(n)$ since the items are in ascending order.</p>
<h3 id="bst-summary">BST Summary</h3>
<p>We can use BSTs to implement a set or map, however, with ordering-based operations such as min, max, range etc. with good complexity.</p>
<p>Insert/Delete/Search will take proportional time to the height of the tree. Which in the best/average case is $\mathcal{O}(log\ n)$,
but if the tree is <strong>unbalanced</strong> it will become linear.</p>
<p>So the main takeaway is that, if a BST is balanced, it‚Äôs really powerful and efficient. So let‚Äôs take a look how we can make it balanced.</p>
<h3 id="invariants">Invariants</h3>
<p>The property that, in the left subtree, the keys should be lesser than and that in the right subtree, the keys should be greater than is an example of <strong>data structure invariant</strong>.</p>
<p>An invariant is a property that the designer wants to always hold. Usually a rule about what instances of the data structure are ‚Äòvalid‚Äô.</p>
<p>But these invariants can be expensive to maintain - if we say ‚Äòthis array is sorted‚Äô we can‚Äôt just use append anymore, we need to <em>insert</em> it. So we need to find an invariant for BSTs which is easier to maintain.</p>
<h3 id="avl-trees">AVL Trees</h3>
<p>AVL Trees has a less restrictive invariant compared to BSTs - in an AVL tree we keep the tree <em>almost</em> balanced.</p>
<p>The invariant for an AVL tree is: ‚ÄúFor each node, the heights of its <em>left</em> and <em>right</em> subtrees differ by at <strong>most</strong> 1‚Äù.</p>
<h3 id="tree-rotations">Tree Rotations</h3>
<p>Now before we dive deeper into AVL trees - let‚Äôs take a look into rotations within trees. When we talk about rotations in trees we mean that it has a different node as the root.</p>
<p>Right rotation: <em>left</em> child of root becomes root, old root becomes <em>right</em> child.
Left rotation: <em>right child</em> of root becomes root, old root becomes <em>left</em> child.</p>
<p>Tree rotations preserve ordering and contents in BSTs. Note that we can also rotate a subtree.</p>
<h3 id="avl-insertion">AVL Insertion</h3>
<p>To insert a new node into an AVL tree - we first start by doing a BST insertion - this might break the AVL tree (the invariant).</p>
<p>But to fix this we go upwards from the new node, finding and fixing nodes that break the invariant. Note that during BST insertion, each node‚Äôs height either stays the same or goes up by 1.</p>
<p>We have different cases which we‚Äôll look at.</p>
<h4 id="case-1-left-left-tree">Case 1: Left-left Tree</h4>
<p>In the Left-left case, we did an insertion in the <em>left</em> child of the <em>left</em> child of this node, which broke the invariant.</p>
<p>To fix this, we just make a right rotation</p>
<h4 id="case-2-right-right-tree">Case 2: Right-right Tree</h4>
<p>In the Right-right case, we did an insertion in the <em>right</em> child of the <em>right</em> child of this node, which broke the tree.</p>
<p>To fix we make a left rotation!</p>
<h4 id="case-3-left-right-tree">Case 3: Left-right Tree</h4>
<p>In the Left-right case, the extra height is in the root‚Äôs <em>left</em> child then in the <em>right child</em> of that. We can‚Äôt fix it with one rotation instead - but luckily we still have a solution.</p>
<p>First we‚Äôre going to rotate the <em>left</em> <strong>subtree</strong> <em>left</em>. When we have performed the left rotation, we‚Äôve now created a Left-left tree, which is fixed by one right rotation as we saw earlier.</p>
<h4 id="case-4-right-left-tree">Case 4: Right-left Tree</h4>
<p>The same logic as case 3, the extra height is in the root‚Äôs <em>right child</em> and then in the <em>left child</em> of that one.
To fix this we first make a right rotation in the right subtree - then make a final left rotation to fix the tree.</p>
<h3 id="avl-insertion-summary">AVL Insertion Summary</h3>
<p>So we have these four cases and, we know how to solve them - we just need to remember how we identify them. We identify which <em>grandchild</em> the extra unit of height is in.</p>
<h3 id="avl-deletion">AVL Deletion</h3>
<p>In the case of deleting the node, the same situation occurs! But instead we <em>reduce</em> the height of some tree by 1, breaking the invariant.</p>
<p>So, therefore we can use the <strong>exact same balancing algorithm</strong>. So when implementing an AVL tree we only need to implement the balancing algorithm once!</p>
<p>In conclusion, AVL trees use rotation to keep the tree balanced. In the worst case height of the tree is $1.44\ log_2(n)$, but normally close to $log_2(n)$.</p>
<h3 id="2-3-trees">2-3 Trees</h3>
<p>2-3 trees is also another <strong>height</strong> balanced trees. 2-3 trees is made from two kinds of nodes:</p>
<ul>
<li>2 - node: Has a key <code>x</code> and two subtrees <code>A</code> and <code>B</code>. Just like in a BST, A &#x3C; x &#x3C; B</li>
<li>3 - node: Has <strong>two</strong> keys <code>x</code>, <code>y</code> with <strong>three</strong> subtrees, A, B, and C. As usual, A &#x3C; x &#x3C; B &#x3C; y &#x3C; C.</li>
</ul>
<h3 id="searching-in-2-3-trees">Searching in 2-3 Trees</h3>
<p>It proceeds just as in a BST. Since - In a 2-node, compare search key against key in node, descend into one of the  two children.</p>
<p>In the case of a 3-node, compare the search key against <strong>both</strong> keys in the node, descend into one of the <strong>three</strong> children.</p>
<h3 id="how-2-3-trees-balance">How 2-3 Trees balance</h3>
<p>In the AVL case we saw that we have to balance via rotations after each insertion/deletion. In the case of a 2-3 tree, we never have to balance since it‚Äôs <strong>always</strong> balanced.</p>
<p>Because if one child is null all children must be null together (you can test this if you want by drawing examples). This means the empty trees are all at one level (which implies a balanced tree).</p>
<p>The resulting tree will have a height of between $log_3(n)$ and $lg(n)$</p>
<h3 id="insertion-in-2-3-trees">Insertion in 2-3 trees</h3>
<p>When we want to insert a new node to a 2-3 tree we use a normal insertion, however, this might break the tree via, for example, an unbalanced tree or a ‚Äò4-node‚Äô.</p>
<p>To fix this we use the following algorithm:</p>
<ul>
<li><em>absorb</em> the node into its parent, move up to the parent</li>
<li>If the node is a 4-node, <em>split</em> it into 2-nodes.</li>
</ul>
<p>We keep alternating these 2 steps, we stop once we don‚Äôt need to split.</p>
<h3 id="summary-2-3-trees">Summary 2-3 trees</h3>
<p>So conceptually they are quite simple - but the implementation is quite horrible, even though the complexity is great, since the tree is always <strong>perfectly</strong> balanced.</p>
<p>So to fix this we use something called a ‚Äòred-black BSTs‚Äô.</p>
<h3 id="red-black-bsts">Red-black BSTs</h3>
<p>A red-black BSTs implement a 2-3 tree <em>using a BST</em>. We can see a 2-3 node as a BST tree since - a 2-node becomes a regular BST node, however, a 3-node becomes <strong>two</strong> BST nodes.</p>
<p>The name ‚Äòred-black‚Äô comes from that we color the BST nodes in order to distinguish 2-nodes from 3-nodes.</p>
<p>2-nodes become black and 3-nodes become black with <em>red child</em>. So red is ‚Äòonly part of a 3-node‚Äô.</p>
<p>So a Red-black BST is really just a 2-3 but store it in a BST since we translate it to the corresponding 2-3 tree.</p>
<h3 id="red-black-tree-invariant">Red-black Tree Invariant</h3>
<p>The invariant that we must uphold for a red-black tree is:</p>
<ul>
<li>A red node may only occur as the <em>left</em> child of a <em>black</em> node</li>
<li>Black balance: on any path from the root to a null, we pass through the same number of black nodes</li>
<li>And the BST invariant must also hold.</li>
</ul>
<h3 id="red-black-bst-insertion">Red-black BST Insertion</h3>
<p>To make an insertion into a red-black tree, we first make a normal BST insertion, the newly added node is a <em>red</em> node.</p>
<p>This may break our invariant on red nodes, but this way we always keep the black balance and BST properties.</p>
<p>But this way we‚Äôll only break the invariant by placing a red node in a forbidden place. There are 3 cases which this will happen.</p>
<h4 id="case-1-skew">Case 1: Skew</h4>
<p>In a skew case, we have placed it to the right of a 2-node (black node) and therefore broken the first rule. We fix it by an operation called <em>skewing</em>.</p>
<p>Which is a kind of rotation, we‚Äôll look at the implementation later.</p>
<h4 id="case-2-split">Case 2: Split</h4>
<p>In a split case we have created a 4-node (or a red having a red child), therefore we need to split it into 2-nodes.
In the case of splitting, we may break the black balance which means we need to continue up recursively</p>
<h4 id="case-3-red-root-node">Case 3: Red Root Node</h4>
<p>After a split, we might end up with a red node as the <em>root</em> of the whole tree. In a case like this, the fix is simple, we just make the root a black node instead!</p>
<h3 id="red-black-tree-implementation">Red-black Tree Implementation</h3>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>class RBNode:</span></span>
<span class="line"><span>    def __init__(self, val):</span></span>
<span class="line"><span>        self.red = False</span></span>
<span class="line"><span>        self.parent = None</span></span>
<span class="line"><span>        self.val = val</span></span>
<span class="line"><span>        self.left = None</span></span>
<span class="line"><span>        self.right = None</span></span>
<span class="line"><span></span></span>
<span class="line"><span>class RBTree:</span></span>
<span class="line"><span>    def __init__(self):</span></span>
<span class="line"><span>        self.nil = RBNode(0)</span></span>
<span class="line"><span>        self.nil.red = False</span></span>
<span class="line"><span>        self.nil.left = None</span></span>
<span class="line"><span>        self.nil.right = None</span></span>
<span class="line"><span>        self.root = self.nil</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def insert(self, val):</span></span>
<span class="line"><span>    new_node = RBNode(val)</span></span>
<span class="line"><span>    new_node.parent = None</span></span>
<span class="line"><span>    new_node.left = self.nil</span></span>
<span class="line"><span>    new_node.right = self.nil</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # New node must be red</span></span>
<span class="line"><span>    new_node.red = True</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    parent = None</span></span>
<span class="line"><span>    current = self.root</span></span>
<span class="line"><span>    while current != self.nil:</span></span>
<span class="line"><span>        parent = current</span></span>
<span class="line"><span>        if new_node.val &#x3C; current.val:</span></span>
<span class="line"><span>            current = current.left</span></span>
<span class="line"><span>        elif new_node.val > current.val:</span></span>
<span class="line"><span>            current = current.right</span></span>
<span class="line"><span>        else:</span></span>
<span class="line"><span>            return</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    new_node.parent = parent</span></span>
<span class="line"><span>    if parent == None:</span></span>
<span class="line"><span>        self.root = new_node</span></span>
<span class="line"><span>    elif new_node.val &#x3C; parent.val:</span></span>
<span class="line"><span>        parent.left = new_node</span></span>
<span class="line"><span>    else:</span></span>
<span class="line"><span>        parent.right = new_node</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    self.fix_insert(new_node)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def rotate_left(self, x):</span></span>
<span class="line"><span>    y = x.right</span></span>
<span class="line"><span>    x.right = y.left</span></span>
<span class="line"><span>    if y.left != self.nil:</span></span>
<span class="line"><span>        y.left.parent = x</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    y.parent = x.parent</span></span>
<span class="line"><span>    if x.parent == None:</span></span>
<span class="line"><span>        self.root = y</span></span>
<span class="line"><span>    elif x == x.parent.left:</span></span>
<span class="line"><span>        x.parent.left = y</span></span>
<span class="line"><span>    else:</span></span>
<span class="line"><span>        x.parent.right = y</span></span>
<span class="line"><span>    y.left = x</span></span>
<span class="line"><span>    x.parent = y</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def rotate_right(self, x):</span></span>
<span class="line"><span>    y = x.left</span></span>
<span class="line"><span>    x.left = y.right</span></span>
<span class="line"><span>    if y.right != self.nil:</span></span>
<span class="line"><span>        y.right.parent = x</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    y.parent = x.parent</span></span>
<span class="line"><span>    if x.parent == None:</span></span>
<span class="line"><span>        self.root = y</span></span>
<span class="line"><span>    elif x == x.parent.right:</span></span>
<span class="line"><span>        x.parent.right = y</span></span>
<span class="line"><span>    else:</span></span>
<span class="line"><span>        x.parent.left = y</span></span>
<span class="line"><span>    y.right = x</span></span>
<span class="line"><span>    x.parent = y</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def fix_insert(self, new_node):</span></span>
<span class="line"><span>    while new_node != self.root and new_node.parent.red:</span></span>
<span class="line"><span>        if new_node.parent == new_node.parent.parent.right:</span></span>
<span class="line"><span>            u = new_node.parent.parent.left  # uncle</span></span>
<span class="line"><span>            if u.red:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                u.red = False</span></span>
<span class="line"><span>                new_node.parent.red = False</span></span>
<span class="line"><span>                new_node.parent.parent.red = True</span></span>
<span class="line"><span>                new_node = new_node.parent.parent</span></span>
<span class="line"><span>            else:</span></span>
<span class="line"><span>                if new_node == new_node.parent.left:</span></span>
<span class="line"><span>                    new_node = new_node.parent</span></span>
<span class="line"><span>                    self.rotate_right(new_node)</span></span>
<span class="line"><span>                new_node.parent.red = False</span></span>
<span class="line"><span>                new_node.parent.parent.red = True</span></span>
<span class="line"><span>                self.rotate_left(new_node.parent.parent)</span></span>
<span class="line"><span>        else:</span></span>
<span class="line"><span>            u = new_node.parent.parent.right  # uncle</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            if u.red:</span></span>
<span class="line"><span>                u.red = False</span></span>
<span class="line"><span>                new_node.parent.red = False</span></span>
<span class="line"><span>                new_node.parent.parent.red = True</span></span>
<span class="line"><span>                new_node = new_node.parent.parent</span></span>
<span class="line"><span>            else:</span></span>
<span class="line"><span>                if new_node == new_node.parent.right:</span></span>
<span class="line"><span>                    new_node = new_node.parent</span></span>
<span class="line"><span>                    self.rotate_left(new_node)</span></span>
<span class="line"><span>                new_node.parent.red = False</span></span>
<span class="line"><span>                new_node.parent.parent.red = True</span></span>
<span class="line"><span>                self.rotate_right(new_node.parent.parent)</span></span>
<span class="line"><span>    self.root.red = False</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def exists(self, val):</span></span>
<span class="line"><span>    curr = self.root</span></span>
<span class="line"><span>    while curr != self.nil and val != curr.val:</span></span>
<span class="line"><span>        if val &#x3C; curr.val:</span></span>
<span class="line"><span>            curr = curr.left</span></span>
<span class="line"><span>        else:</span></span>
<span class="line"><span>            curr = curr.right</span></span>
<span class="line"><span>    return curr</span></span>
<span class="line"><span></span></span></code></pre>
<h3 id="red-black-tree-summary">Red-black Tree Summary</h3>
<p>Red-black trees are 2-3 trees implemented using a BST - they have the invariant that they have to correspond to a perfectly balanced 2-3 tree.</p>
<p>Update strategy is: Insert in a way that break the rules on red nodes, then fix it.</p>
<p>They have logarithmic performance - worst case the height is $2\ log(n)$</p>
<p>This was the end of this part - it was a lot to process, it was a lot for me as well :). In the next part we‚Äôll cover priority queues and how they can be implemented as a kind of tree :).</p> <div class="mt-24"> <div class="grid grid-cols-2 gap-1.5 sm:gap-3"> <a href="/chalmers/dat038/dat038_5" class="group relative flex flex-nowrap rounded-lg border border-black/15 px-4 py-3 pl-10 no-underline transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute left-2 top-1/2 size-5 -translate-y-1/2 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-3 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 5 12 12 19" class="translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="flex items-center text-sm"> Part 5 - Hash Tables </div> </a> <a href="/chalmers/dat038/dat038_7" class="group relative flex flex-grow flex-row-reverse flex-nowrap rounded-lg border border-black/15 px-4 py-4 pr-10 no-underline transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute right-2 top-1/2 size-5 -translate-y-1/2 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-3 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 19 12 12 19" class="-translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="flex items-center text-sm"> Part 7 - Binary Heaps </div> </a> </div> </div> <div class="mt-24"> <div class="giscus"></div> <script data-astro-rerun src="https://giscus.app/client.js" data-repo="rezaarezvan/rezvan.xyz" data-repo-id="R_kgDOHvQr3w" data-category="General" data-category-id="DIC_kwDOHvQr384CiWVC" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="en" data-loading="lazy" crossorigin="anonymous" async></script> </div> </article> </div>  </main> <footer class="animate"> <div class="mx-auto max-w-screen-sm px-3"> <div class="relative"> <div class="absolute -top-12 right-0"> <button id="back-to-top" class="group relative flex w-fit flex-nowrap rounded border border-black/15 py-1.5 pl-8 pr-3 transition-colors duration-300 ease-in-out hover:bg-black/5 hover:text-black focus-visible:bg-black/5 focus-visible:text-black dark:border-white/20 dark:hover:bg-white/5 dark:hover:text-white dark:focus-visible:bg-white/5 dark:focus-visible:text-white"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="absolute left-2 top-1/2 size-4 -translate-y-1/2 rotate-90 fill-none stroke-current stroke-2"> <line x1="5" y1="12" x2="19" y2="12" class="translate-x-2 scale-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-hover:scale-x-100 group-focus-visible:translate-x-0 group-focus-visible:scale-x-100"></line> <polyline points="12 5 5 12 12 19" class="translate-x-1 transition-transform duration-300 ease-in-out group-hover:translate-x-0 group-focus-visible:translate-x-0"></polyline> </svg> <div class="text-sm">Back to top</div> </button> </div> </div> <div class="flex items-center justify-between"> <div>&copy; 2024 ‚Ä¢ rezvan.xyz </div> <div class="flex flex-wrap items-center gap-1.5"> <button id="light-theme-button" aria-label="Light theme" class="group flex size-9 items-center justify-center rounded border border-black/15 hover:bg-black/5 focus-visible:bg-black/5 dark:border-white/20 dark:hover:bg-white/5 dark:focus-visible:bg-white/5"> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="transition-colors duration-300 ease-in-out group-hover:animate-pulse group-hover:stroke-black group-focus-visible:animate-pulse group-focus-visible:stroke-black group-hover:dark:stroke-white dark:group-focus-visible:stroke-white"> <circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3"></line> <line x1="12" y1="21" x2="12" y2="23"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line> <line x1="1" y1="12" x2="3" y2="12"></line> <line x1="21" y1="12" x2="23" y2="12"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line> </svg> </button> <button id="dark-theme-button" aria-label="Dark theme" class="group flex size-9 items-center justify-center rounded border border-black/15 hover:bg-black/5 focus-visible:bg-black/5 dark:border-white/20 dark:hover:bg-white/5 dark:focus-visible:bg-white/5"> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="transition-colors duration-300 ease-in-out group-hover:animate-pulse group-hover:stroke-black group-focus-visible:animate-pulse group-focus-visible:stroke-black group-hover:dark:stroke-white dark:group-focus-visible:stroke-white"> <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path> </svg> </button> <button id="system-theme-button" aria-label="System theme" class="group flex size-9 items-center justify-center rounded border border-black/15 hover:bg-black/5 focus-visible:bg-black/5 dark:border-white/20 dark:hover:bg-white/5 dark:focus-visible:bg-white/5"> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="transition-colors duration-300 ease-in-out group-hover:animate-pulse group-hover:stroke-black group-focus-visible:animate-pulse group-focus-visible:stroke-black group-hover:dark:stroke-white dark:group-focus-visible:stroke-white"> <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect> <line x1="8" y1="21" x2="16" y2="21"></line> <line x1="12" y1="17" x2="12" y2="21"></line> </svg> </button> </div> </div> </div> </footer> <aside data-pagefind-ignore> <div id="backdrop" class="bg-[rgba(0, 0, 0, 0.5] invisible fixed left-0 top-0 z-50 flex h-screen w-full justify-center p-6 backdrop-blur-sm" data-astro-transition-persist="astro-3snakcvo-2"> <div id="pagefind-container" class="m-0 flex h-fit max-h-[80%] w-full max-w-screen-sm flex-col overflow-auto rounded border border-black/15 bg-neutral-100 p-2 px-4 py-3 shadow-lg dark:border-white/20 dark:bg-neutral-900"> <div id="search" class="pagefind-ui pagefind-init" data-pagefind-ui data-bundle-path="/pagefind/" data-ui-options="{&#34;showImages&#34;:false,&#34;excerptLength&#34;:15,&#34;resetStyles&#34;:false}"></div>  <div class="mr-2 pb-1 pt-4 text-right text-xs dark:prose-invert">
Press <span class="prose text-xs dark:prose-invert"><kbd class="">Esc</kbd></span> or click anywhere to close
</div> </div> </div> </aside> <script>
  const magnifyingGlass = document.getElementById("magnifying-glass");
  const backdrop = document.getElementById("backdrop");

  function openPagefind() {
    const searchDiv = document.getElementById("search");
    const search = searchDiv.querySelector("input");
    setTimeout(() => {
      search.focus();
    }, 0);
    backdrop?.classList.remove("invisible");
    backdrop?.classList.add("visible");
  }

  function closePagefind() {
    const search = document.getElementById("search");
    search.value = "";
    backdrop?.classList.remove("visible");
    backdrop?.classList.add("invisible");
  }

  // open pagefind
  magnifyingGlass?.addEventListener("click", () => {
    openPagefind();
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "/") {
      e.preventDefault();
      openPagefind();
    } else if ((e.metaKey || e.ctrlKey) && e.key === "k") {
      e.preventDefault();
      openPagefind();
    }
  });

  // close pagefind
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" || e.keyCode === 27) {
      closePagefind();
    }
  });

  // close pagefind when searched result(link) clicked
  document.addEventListener("click", (event) => {
    if (event.target.classList.contains("pagefind-ui__result-link")) {
      closePagefind();
    }
  });

  backdrop?.addEventListener("click", (event) => {
    if (!event.target.closest("#pagefind-container")) {
      closePagefind();
    }
  });

  // prevent form submission
  const form = document.getElementById("form");
  form?.addEventListener("submit", (event) => {
    event.preventDefault();
  });
</script>  </body></html>